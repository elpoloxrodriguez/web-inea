<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <title>INEA - Instituto Nacional de los Espacios Acu√°ticos</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <!--====== Bootstrap css ======-->
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css">
    <!--====== Line Icons css ======-->
    <link rel="stylesheet" href="./assets/css/LineIcons.css">
    <!--====== Magnific Popup css ======-->
    <link rel="stylesheet" href="./assets/css/magnific-popup.css">
    <!--====== Slick css ======-->
    <link rel="stylesheet" href="./assets/css/slick.css">
    <!--====== Animate css ======-->
    <link rel="stylesheet" href="./assets/css/animate.css">
    <!--====== Default css ======-->
    <link rel="stylesheet" href="./assets/css/default.css">
    <!--====== Style css ======-->
    <link rel="stylesheet" href="./assets/css/style.css">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <!-- ===== chat bot -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Sans:400,700">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- <link rel="stylesheet" type="text/css" href="chatbot-dp.css"> -->
    <!-- ===== chat bot -->
</head>

<body>
    <app-root></app-root>
</body>
<!--====== jquery js ======-->
<script src="./assets/js/vendor/modernizr-3.6.0.min.js"></script>
<script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
<!--====== Bootstrap js ======-->
<script src="./assets/js/bootstrap.min.js"></script>
<script src="./assets/js/popper.min.js"></script>
<!--====== Slick js ======-->
<script src="./assets/js/slick.min.js"></script>
<!--====== Isotope js ======-->
<script src="./assets/js/isotope.pkgd.min.js"></script>
<!--====== Images Loaded js ======-->
<script src="./assets/js/imagesloaded.pkgd.min.js"></script>
<!--====== Magnific Popup js ======-->
<script src="./assets/js/jquery.magnific-popup.min.js"></script>
<!--====== Scrolling js ======-->
<script src="./assets/js/scrolling-nav.js"></script>
<script src="./assets/js/jquery.easing.min.js"></script>
<!--====== wow js ======-->
<script src="./assets/js/wow.min.js"></script>
<!--====== Main js ======-->
<script src="./assets/js/main.js"></script>

<!-- ===== chat bot -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
<script>
    var botController = (function () {


    })();

    var uiController = (function () {


    })();




    var controller = (function (botCntr, uiCntr) {
        var $chatCircle,
            $chatBox,
            $chatBoxClose,
            $chatBoxWelcome,
            $chatWraper,
            $submitBtn,
            $chatInput,
            $msg;

        /*toggle*/
        function hideCircle(evt) {
            evt.preventDefault();
            $chatCircle.hide('scale');
            $chatBox.show('scale');
            $chatBoxWelcome.show('scale');
        }

        function chatBoxCl(evt) {
            evt.preventDefault();
            $chatCircle.show('scale');
            $chatBox.hide('scale');
            $chatBoxWelcome.hide('scale');
            $chatWraper.hide('scale');
        }

        function chatOpenMessage(evt) {
            evt.preventDefault();
            $chatBoxWelcome.hide();
            $chatWraper.show();
        }

        //generate messages on submit click
        function submitMsg(evt) {
            evt.preventDefault();

            //1. get input message data
            msg = $chatSubmitBtn.val();

            //2.if there is no string button send shoudn't work
            if (msg.trim() == '') {
                return false;
            }
            //3. add message to bot controller
            callbot(msg);
            //4. display message to ui controller
            generate_message(msg, 'self');

        }

        function chatSbmBtn(evt) {
            if (evt.keyCode === 13 || evt.which === 13) {
                console.log("btn pushed");
            }
        }
        /* var input = uiCntr.getInput();*/
        /* $chatSubmitBtn.on("click", hideCircle);*/



        function init() {
            $chatCircle = $("#chat-circle");
            $chatBox = $(".chat-box");
            $chatBoxClose = $(".chat-box-toggle");
            $chatBoxWelcome = $(".chat-box-welcome__header");
            $chatWraper = $("#chat-box__wraper");
            $chatInput = $("#chat-input__text");
            $submitBtn = $("#chat-submit");

            //1. call toggle 
            $chatCircle.on("click", hideCircle);
            $chatBoxClose.on("click", chatBoxCl);
            $chatInput.on("click", chatOpenMessage);

            //2. call wait message from CRM-human

            $submitBtn.on("click", chatSbmBtn);
            $chatInput.on("keypress", chatSbmBtn);


            //6. get message from bot controller-back end
            //7. display bot message to ui controller
        }

        return {
            init: init
        };

    })(botController, uiController);


    $('.chat-input__form').on('submit', function (e) {
        e.preventDefault();
        msg = $('.chat-input__text').val();

        $('.chat-logs').append('<div id="cm-msg-0" class="chat-msg background-warning push-right bot"><div class="cm-msg-text">' + msg + '</div><span class="msg-avatar"><img class="chat-box-overlay_robot" src="https://www.meetsource.com//userStyles/images/user.png"></span></div>');
        $('.chat-input__text').val('');
    });


    $(document).ready(controller.init);

    know = {
        "hello": "hi",
        "how are you?": "good",
        "ok": ":)"
    };
    function talk() {
        var user = document.getElementById("userBox").value;
        document.getElementById("userBox").value = "";
        document.getElementById("chatLog").innerHTML += user + "<br>";
        if (user in know) {
            document.getElementById("chatLog").innerHTML += know[user] + "<br>";
        }
        else {
            document.getElementById("chatLog").innerHTML += "I don't understand...<br>";
        }
    }

</script>
<!-- ===== chat bot -->

</html>